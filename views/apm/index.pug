extends ../public/layout

block title
    title APM

block content
    h1 Automated Printing Machines (APMs)
    hr

    button.btn.btn-primary(type="button" onclick='gotoAdd()').ms-auto.me-auto Add new APM
    table.table
        thead
            tr
            th(scope='col') No
            th(scope='col') APM ID
            th(scope='col') Name
            th(scope='col') Paper amount
            th(scope='col') Status
            th(scope='col' style='width: 250px') Action
            
        tbody

            each apm, index in payload
                
                tr(onclick='changeWindow("' + apm.apmid + '")')
                    th(scope='row') #{index}
                    td #{apm.apmid}
                    td #{apm.printername}
                    td #{apm.paper_amount}
                    td #{apm.status}
                    td
                        .container
                            .row
                                .col-sm
                                    button.btn.btn-danger(onclick='event.stopPropagation(); redirectUpdate("' + apm.apmid + '")' z-index=3) Update paper amount
                                .col-sm
                                    button.btn.btn-success(z-index=3) Edit
                       
                        

    
    script.
        function changeWindow(apmid) {
            window.location.href=`/apm/detail/${apmid}`
        }

        function gotoAdd() {
            window.location.href='/apm/add'
        }

        function redirectUpdate(apmid) {
            window.location.href = `/apm/updatepaper/${apmid}`
        }

        

